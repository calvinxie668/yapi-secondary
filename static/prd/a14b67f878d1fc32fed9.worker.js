!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),s=r(i),o=[];self.FILTERED_RECORD_LIST=[];var u=100;self.beginIndex=0,self.refreshing=!0,self.endIndex=self.beginIndex+u-1,self.currentStateData=[],self.updateQueryTimer=null,self.filterObj={},self.IN_DIFF=!1;var a=function(e){var t=null;if(e){var n=e.replace(/\r\n/g,"\n").replace(/\n\n/g,"\n");n=n.replace(/\n*$/,""),"/"===n[0]&&"/"===n[n.length-1]&&(n=n.substring(1,n.length-2)),n=n.replace(/((.+)\n|(.+)$)/g,function(e,t,n){return n?"("+n+")|":"("+t+")"});try{t=new RegExp(n)}catch(e){console.error(e)}}return t};self.resetDisplayRecordIndex=function(){self.beginIndex=0,self.endIndex=self.beginIndex+u-1},self.calculateFilteredRecords=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e){self.FILTERED_RECORD_LIST=[];var n=[];n=void 0!=self.filterObj.type&&"all"!=self.filterObj.type?o.filter(function(e){return e.type==self.filterObj.type}):o;for(var r=n.length,i=0;i<r;i++){var u=n[i];u.originIndex=i+1;var f=(0,s.default)(u);(!self.filterObj.requestMsgType||u.request&&u.request.hasOwnProperty("requestMsgType")&&u.request.requestMsgType===self.filterObj.requestMsgType||u&&u.hasOwnProperty("topicId")&&u.topicId===self.filterObj.requestMsgType)&&(!self.filterObj.responseMsgType||u.response&&u.response.hasOwnProperty("responseMsgType")&&u.response.responseMsgType===self.filterObj.responseMsgType||u&&u.hasOwnProperty("msgType")&&u.msgType===self.filterObj.responseMsgType)&&(self.filterObj.key1&&!a(self.filterObj.key1).test(f)||self.filterObj.key2&&!a(self.filterObj.key2).test(f)||self.filterObj.key3&&!a(self.filterObj.key3).test(f)||self.FILTERED_RECORD_LIST.push(u))}}else t.forEach(function(e){var t=self.FILTERED_RECORD_LIST.findIndex(function(t){return e.id===t.id});if(t>=0)self.FILTERED_RECORD_LIST[t]=e;else{var n=(0,s.default)(e);(!self.filterObj.requestMsgType||e.request&&e.request.hasOwnProperty("requestMsgType")&&e.request.requestMsgType===self.filterObj.requestMsgType||e&&e.hasOwnProperty("topicId")&&e.topicId===self.filterObj.requestMsgType)&&(!self.filterObj.responseMsgType||e.response&&e.response.hasOwnProperty("responseMsgType")&&e.response.responseMsgType===self.filterObj.responseMsgType||e&&e.hasOwnProperty("msgType")&&e.msgType===self.filterObj.responseMsgType)&&(self.filterObj.key1&&!a(self.filterObj.key1).test(n)||self.filterObj.key2&&!a(self.filterObj.key2).test(n)||self.filterObj.key3&&!a(self.filterObj.key3).test(n)||self.FILTERED_RECORD_LIST.push(e))}})},self.diffRecords=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!self.IN_DIFF){self.IN_DIFF=!0;var t=!0;self.refreshing?(self.beginIndex=Math.max(self.FILTERED_RECORD_LIST.length-1-u,0),self.endIndex=self.FILTERED_RECORD_LIST.length-1):self.endIndex>self.FILTERED_RECORD_LIST.length&&(self.endIndex=self.FILTERED_RECORD_LIST.length);var n=self.FILTERED_RECORD_LIST.slice(self.beginIndex,self.endIndex+1),r=self.currentStateData.length,i=n.length;if(i!==r)t=!0;else for(var o=0;o<r;o++){var a=self.currentStateData[o],f=n[o];if(a.id!==f.id||f._render===!0){t=!0;break}}self.currentStateData=n,self.postMessage((0,s.default)({type:"updateData",isForceUpdate:e,shouldUpdateRecord:t,recordList:n})),self.IN_DIFF=!1}},self.checkNewRecordsTip=function(){if(!self.IN_DIFF){var e=self.FILTERED_RECORD_LIST.length;self.postMessage((0,s.default)({type:"updateTip",data:e-self.endIndex>0}))}},self.updateSingle=function(e){var t=o.findIndex(function(t){return t.id===e.id});t>=0?(e._render=!0,o[t]=e):o.push(e),o.forEach(function(e,t){e._render=!1,e.originIndex=t+1}),void 0!=self.filterObj.type&&"all"!=self.filterObj.type?e.type==self.filterObj.type&&self.calculateFilteredRecords(!1,[e]):self.calculateFilteredRecords(!1,[e])},self.addEventListener("message",function(e){var t=JSON.parse(e.data);switch(t.type){case"initRecord":o=t.data,self.calculateFilteredRecords(!0),self.diffRecords(!0);break;case"updateQuery":self.updateQueryTimer&&clearTimeout(self.updateQueryTimer),self.updateQueryTimer=setTimeout(function(){self.filterObj=t.filterObj,self.calculateFilteredRecords(!0),self.diffRecords()},150);break;case"updateSingle":self.updateSingle(t.data),self.refreshing?self.diffRecords():self.checkNewRecordsTip();break;case"loadMore":if(self.IN_DIFF)return;self.refreshing=!1,t.data>0?self.endIndex+=t.data:self.beginIndex=Math.max(self.beginIndex+t.data,0),self.diffRecords(!0);break;case"clear":o=[],self.calculateFilteredRecords(!0),self.diffRecords();break;case"updateRefreshing":"boolean"==typeof t.refreshing&&(self.refreshing=t.refreshing,self.refreshing?self.diffRecords():self.checkNewRecordsTip())}})},function(e,t,n){e.exports={"default":n(2),__esModule:!0}},function(e,t,n){var r=n(3),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)}])